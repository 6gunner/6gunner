# 矩阵和变换

> 不同的括号类型对应不同的环境名：
>
> - `bmatrix` - 方括号
> - `pmatrix` - 圆括号
> - `Bmatrix` - 花括号
> - `vmatrix` - 单竖线
> - `Vmatrix` - 双竖线



## **矩阵相乘：**

- **要求：左列 = 右行才能相乘，也就是需要y=m。得到的结果是x行，n列**
  $$
  M_{xy} * M_{mn} = New_{xn}
  $$
  
- **计算规则**
  $$
  \begin{bmatrix} 
  A_{11} & A_{12} & A_{13} \\
  A_{21} & A_{22} & A_{23}
  \end{bmatrix}
  
  *
  
  \begin{bmatrix} 
  B_{11} & B_{12} \\
  B_{21} & B_{22} \\
  B_{31} & B_{32}
  \end{bmatrix}
  
  =
  
  \begin{bmatrix} 
  [A_{11}&A_{12}&A_{13}].[B_{11}&B_{21}&B_{31}]&[A_{11}&A_{12}&A_{13}].[B_{12}&B_{22}&B_{32}]\\
  [A_{21}&A_{22}&A_{23}].[B_{11}&B_{21}&B_{31}]&[A_{21}&A_{22}&A_{23}].[B_{12}&B_{22}&B_{32}]
  \end{bmatrix}
  $$



- **矩阵的乘法不满足结合律, 需要进行转置**
  $$
  AB = B^TA^T
  $$
  





## 行矩阵 &  列矩阵

### 行矩阵

可以用来表示矢量
$$
v=\begin{bmatrix} 
1 & 2 & 3
\end{bmatrix}
$$

### 列矩阵

可以用来表示矢量
$$
r=\begin{bmatrix} 
1 \\
2 \\
3
\end{bmatrix}
$$



















## 矩阵对应的几何解释

如果想对一个向量进行转化，我们需要将一个向量✖️一个矩阵，这样做有什么几何意义？

实际上：矩阵表示的是坐标空间变化。转化矩阵就是转化坐标系。

把x，y，z三个轴分别理解为基向量;
$$
(1,0,0)\\
(0,1,0)\\
(0,0,1)
$$
然后转化就是将矢量从原始坐标空间转化到新的坐标空间，转化后的原点不变。

**注意：这里说的变化不包含平移。**

 

### 缩放

只需要在矩阵的对角线上有值就可以；
$$
\begin{bmatrix} 
Sx&0&0\\
0&Sy&0\\
0&0&Sz\\
\end{bmatrix}
$$






### 旋转

旋转比较难理解，

**2D旋转矩阵(逆时针旋转θ角度):**

![img](https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-08/2d_rotation.png)

用矩阵来表示
$$
R = \begin{bmatrix} 
		-p'-\\
    -q'-\\
    \end{bmatrix}
   = \begin{bmatrix} 
		cosθ&sinθ\\
    -sinθ&cosθ\\
    \end{bmatrix}
$$
例如，如果有向量 v = [x, y]，旋转后的向量 v' = V * R 就是：
$$
v' = \begin{vmatrix} 
		Xcosθ-Ysinθ & Xsinθ+Ycosθ\\
    \end{vmatrix}
$$

$$

$$



#### 3d旋转

**围绕x轴旋转**

![img](https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-08/rotate_about_x_1.png)

**围绕y轴旋转**





**围绕z轴旋转**





### 移动

移动需要用到homogeneous coordinate（**齐次坐标**）

homogeneous coordinate基本概念：

- 在n维空间中的点用n+1维坐标表示
- 2D点 (x,y) → 齐次坐标 (x,y,w)，其中实际坐标 = (x/w, y/w)
- 3D点 (x,y,z) → 齐次坐标 (x,y,z,w)，其中实际坐标 = (x/w, y/w, z/w)



一个向量[x,y,z]需要移动，先转化为其次坐标`[x,y,z,1]`，再乘以矩阵
$$
\begin{bmatrix} 
1&0&0&0\\
0&1&0&0\\
0&0&1&0\\
Tx&Ty&Tz&1
\end{bmatrix}
$$
=  `[X + Tx, y + Ty, Z + Tz, 1]`



### 矩阵变化要注意顺序

SRT (scale, rotate, translation)



### 另外

行矩阵乘以矩阵，通常是从左到右

```
v(A)(B)(C)
```

列矩阵乘以矩阵，通常是从右到左, 要反过来写

```
(C)(B)(A)v
```

