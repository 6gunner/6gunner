## 向量

### 向量相加：两个点分别相加

v1 + v2 = (v1x+v2x, v1y+v2y)

向量相加等于位置的移动；可以看做点在v1的基础上，向v2的方向进行了移动

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-03/image-20241030213824673.png" alt="image-20241030213824673" style={{ zoom: '50%' }} />

### 向量相减

(v1-v2), 等于v2指向了v1;

因为(v1-v2)可以看成(v1+-v2), 所以很好理解v3这个方向。平移可以看做成v2指向了v1

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-03/image-20241030214000994.png" alt="image-20241030214000994" style={{ zoom: '50%' }} />

### 向量乘以标量

等于一个向量验证自己的方向延长，或者理解为缩放

### 向量长度

$$
\|v\| = \sqrt{\sum_{i=1}^n v_i^2}
$$

二维向量

$$
\|v\| = \sqrt{x^2 + y^2}
$$

**单位向量：长度为1的向量**

### 向量点乘

点乘得到的结果是一个点

- 如果结果`<0`，表示在一个方向

- `=0`表示两个向量垂直

- `>0` 表示两个向量方向相反

$$
c = a.b = |a|*|b|*cosθ
$$

**有哪些用处？**

- 计算两个向量的夹角；

- 计算一个向量投射到单位向量上的距离；

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102073309818.png" alt="image-20241102073309818" style={{ zoom: '50%' }} />

#### **在一些数学题上的应用；**

##### **怎么判断一个点到一个平面的距离？**

假设已只一个平面的normal垂直向量n^，已知一个平面上随机一p位置

我们只需要计算p-q这个向量，在n^上的投诉距离即可

$$
d = (q-p).n
$$

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102074419210.png" alt="image-20241102074419210" style={{ zoom: '50%' }} />

##### **视角问题**

假设q的位置上有一个人，他的视角范围是r这个扇形，扇形夹角为θ

问如何判断p这个位置上的人，能不能被q看到？

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102075116465.png" alt="image-20241102075116465" style={{ zoom: '50%' }} />

如果p能被q看见，需要满足两个条件

1. (p-q)向量和v向量的夹角小于`θ/2`
2. p到q的距离小于r

数学计算公式就是：

1. ```
   cos@ = normal(p-q).normal(v)
   a = arccos(normal(p-q).normal(v))
   arccos(normal(p-q).normal(v)) < θ /2
   ```

2. |q-p| < r

### 叉乘 Cross Product

- 两个向量的×乘，会得到一个新的向量，新的向量，垂直于两个向量所组成的平面。

- 只能在三维向量里应用；

- 新向量的方向参考**右手法则**： 四指指向a向量的方向，然后掌心移动最小角度到向量b的方向，这时👍🏻的位置就是c向量的方向；

- ==不满足==交换律, 也不满足结合律

```
a ⊗ b != b ⊗ a

a x b = - (b x a)
```

- 叉乘比点乘优先

```
a.bxc = a.(bxc)
```

#### 向量的叉乘计算公式

$$
\vec{a} × \vec{b} = \begin{bmatrix}
i & j & k \\
a_1 & a_2 & a_3 \\
b_1 & b_2 & b_3
\end{bmatrix}
$$

```
"i×j=k, j×k=i, k×i=j"（正向）
"j×i=-k, k×j=-i, i×k=-j"（反向）
```

$$
\vec{a} × \vec{b} = \begin{bmatrix}
a_2b_3 - a_3b_2 \\
a_3b_1 - a_1b_3 \\
a_1b_2 - a_2b_1
\end{bmatrix}
$$

**演示**：c1 = a ⊗ b 如下图

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102094508580.png" alt="image-20241102094508580" style={{ zoom: '50%' }} />

c = b ⊗ a 如下图

![image-20241102094626898](https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102094626898.png)

**长度计算公式：**

$$
|a × b| = |a| |b|sin(θ)
$$

#### **数学题的应用**

#### **1、怎么找到一个三角形的垂直面**

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102095515628.png" alt="image-20241102095515628" style={{ zoom: '50%' }} />

```
(a-b) x (c-b)
```

2、有一个玩家位于p点，它的向前的方向是v(绿色)，向上的方向是u(褐色)。如何判断位置q是在玩家p的左边还是右边？

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102104410265.png" alt="image-20241102104410265" style={{ zoom: '50%' }} />

```
v^ x u^  得到x轴方向的一个向量 right^
```

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/image-20241102104252118.png" alt="image-20241102104252118" style={{ zoom: '50%' }} />

```
(q-p). right^ 然后点乘, 如果结果 > 0 表示在右边
如果< 0 表示在坐标
```

另一种解法：

```
cresult^ = (q-p) x u^ 得到一个y轴的方向矢量；
cresult^ . v^   然后点乘v向量。 如果 <0 表示在右侧，如果 >0 表示在左侧；
```

不过这种解法不好理解，需要结合动图来看

<img src="https://ipic-coda.oss-cn-beijing.aliyuncs.com/2024/11-02/q%E4%BD%8D%E7%BD%AE%E5%8F%98%E5%8C%96%E5%AF%B9%E5%BA%94%E5%8F%89%E4%B9%98%E7%9A%84%E7%BB%93%E6%9E%9C%E5%8F%98%E5%8C%96.gif" alt="q位置变化对应叉乘的结果变化" style={{ zoom: '50%' }} loop="infinite" />

#### 2、在fps游戏里，我们知道向量f^是玩家前进的方向，我们怎么找到up方向和right方向？

什么是FPS游戏？(First Person Shooter）：第一人称射击类游戏

首先我们要找到，FPS视角中的三个重要方向：

- Forward (前向)：镜头朝向的方向
- Up (上方)：通常保持竖直，与世界坐标系的上方一致
- Right (右方)：由Forward和Up叉乘得到的右方向

能够旋转的方向：

- 围绕world up轴，进行左右旋转：Yaw，但不会导致视角倾斜；
- 围绕local right轴，进行上下旋转，Pitch（向上看，向下看）通常限制在-90度到90度之间，防止视角完全翻转。

- 不能围绕前进的方向转，Roll，就好像人不能外头走路一样。
