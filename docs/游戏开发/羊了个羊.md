目前的一些问题以及困难点：



因为数据分了三个区域，levelBlocksVal，randomBlocksVal，slotAreaVal。然后游戏过程中，会频繁的将数据在这三个变量里进行转移。 能否简单点，我们把levelBlocksVal和randomBlocksVal合并，通过一个类型字段来区分，这样只剩下两个变量：allBlocksVal和slotBlocks。 

再优化渲染和移动的逻辑，我们所有的数据都从allBlocksVal里进行渲染，然后游戏过程中需要转化状态，比如点击移动操作，我们虽然在slotBlocks里增加一个block，但是我们不删除allBlocksVal里的block，只是改变block的状态。 这样在dom渲染上面的话只需要根据status，将block的位置重新计算，通过transfrom属性变化到一个位置，而不是先删除dom再渲染dom。



想实现这样的功能，就需要重构useGame2和GamePage.vue， 最好把Block的渲染写成一个组件，否则这里的GamePage里的template太多了，不利于阅读；



我希望你能好好的分析我的源码，然后给出解决方案，输出代码；



一些代码备份：

盲区层叠的样式

```
// 计算随机区域的block样式，主要是位置
const getRandomBlockStyle = (blockIndex: number, index: number, totalBlocks: number) => {
	const baseZIndex = 20;
	const offsetPerBlock = 3; // 每个块的偏移量（像素）
	const isLeftSide = blockIndex === 0;
	return {
		[isLeftSide ? 'left' : 'right']: `${index * offsetPerBlock}px`,
		bottom: '0px',
		zIndex: baseZIndex + (totalBlocks - index)
	};
};

```







### 一些问题计划：

第一天，用animejs解决level区域移动动画问题

第二天：重构css和html布局，解决random区域移动动画问题

第三天：

- [x] 解决插入时卡牌的move问题；

- [x] 解决revert时动画问题；
- [x] 解决消除时移动问题；
- [x] 解决random区域bug问题





第四天：

- [x] 修复revert连点的bug
- [x] 增加remove动画， 



第五天：

- [ ] 增加洗牌动画  
- [ ] 增加删除gif; doing...



长按动画处理：

https://github.com/robinrodricks/vue3-touch-events
