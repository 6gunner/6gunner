# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a personal blog website built with Docusaurus 3.9.2. The site features a blog focused on frontend technology, 3D/Animation, Web3/Blockchain, AI, and mobile/cross-platform development. The home page redirects to `/nav`, a navigation page with curated links to useful developer tools and resources.

## Development Commands

```bash
# Install dependencies (uses pnpm)
pnpm install

# Start development server (opens at http://localhost:3000)
pnpm start

# Build for production
pnpm build

# Serve production build locally
pnpm serve

# Clear cache and generated files
pnpm clear

# Type checking
pnpm typecheck
```

## Architecture

### Content Structure

- **`blogs/`** - Blog posts in Markdown/MDX format. The blog is configured as the main route (`/`) in `docusaurus.config.ts`
- **`docs/`** - Documentation organized by category:
  - `前端技术/` - Frontend technology
  - `3D/` - 3D and animation
  - `Web3/` - Web3 and blockchain
  - `AI/` - AI related content
  - `移动端和跨平台/` - Mobile and cross-platform
  - `Others/` - Miscellaneous topics
- **`src/pages/`** - Custom React pages. The root (`index.tsx`) redirects to `/nav`
- **`src/pages/demo/`** - Live demo components that can be embedded in MDX files

### Sidebar Configuration

The `sidebars.ts` file uses Docusaurus's autogenerated sidebars. Each main category (前端技术, 3D, Web3, AI, etc.) has its own sidebar configuration that auto-generates navigation from the folder structure in `docs/`.

### Navigation Page

The `/nav` page displays categorized links to developer tools and resources:

- Data is defined in `src/data/nav/config.ts` as an array of `NavCategory` objects
- Each category contains items with title, link, icon, and description
- Component structure: `src/pages/nav/_components/LinkCards/` and `LinkCard/`

### Custom Webpack Configuration

The `src/plugins/webpackConfig.js` plugin customizes the build:

- **SVG handling**: SVG files with `?url` suffix are treated as URLs, others are loaded as React components via `@svgr/webpack`
- **Path aliases**:
  - `@/demo` → `./src/demo`
  - `@/components` → `./src/components`
  - `@site/*` → `./*` (defined in tsconfig.json)

### Theme Customization

- Custom CSS: `src/css/custom.css`
- Theme overrides: `src/theme/` directory contains swizzled Docusaurus components (e.g., `BlogPostItem/`)
- Default color mode is set to "dark" in `docusaurus.config.ts`

## Key Configuration Details

### Environment Variables

The `.env` file contains:
```
SITE_URL="https://blog.codastar.me"
```

This is loaded via `dotenv/config` in `docusaurus.config.ts`.

### MDX Features

The site uses several MDX plugins:
- `remark-math` and `rehype-katex` for mathematical expressions
- KaTeX stylesheet is loaded from CDN in `docusaurus.config.ts`

### Search

Algolia DocSearch is configured with:
- App ID: `S0JM98A7PE`
- Index name: `blog2`
- Search configuration is in `docusaurus.config.ts` under `themeConfig.algolia`

### Demo Components in MDX

To use interactive demos in blog posts or docs:

1. Create demo components in `src/pages/demo/` or `src/demo/`
2. Import them in MDX files using the configured aliases
3. See `blogs/如何在MDX中使用Demo组件.mdx` for examples

## Working with This Codebase

### When modifying Docusaurus configuration:
- The main config is TypeScript-based (`docusaurus.config.ts`)
- Sidebar configuration is in `sidebars.ts`
- Both use auto-generation for most content, minimizing manual updates

### When adding new documentation:
- Place files in the appropriate `docs/` subdirectory
- The sidebar will auto-generate based on folder structure
- Use frontmatter to control ordering and metadata

### When working with the navigation page:
- Modify `src/data/nav/config.ts` to add/update links
- Each category should have a clear theme
- Icons should be favicons or small images

## Important Protocols (from .github/copilot-instructions.md)

**RIPER-5 MODE system is defined in the repository but not enforced by default.** When working with this codebase:

1. **Research before implementation**: Always explore existing patterns and architecture
2. **Plan before executing**: For significant changes, outline your approach clearly
3. **Follow existing conventions**: Match the coding style and structure already in place
4. **No unauthorized modifications**: Only implement what is explicitly requested
